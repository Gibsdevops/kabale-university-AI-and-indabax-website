{% load static %} {# Load the static files tag library #}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kabale University AI Club - {% block title %}{% endblock title %}</title>

    {# Link your main CSS file #}
    <link rel="stylesheet" href="{% static 'kuai_club/css/style.css' %}">
    {# You might add other global CSS frameworks here later, like Bootstrap or Tailwind #}
</head>
<body>
    <header class="main-header">
        <div class="container header-content">
            <div class="logo">
                {# You can replace this with a real logo image later #}
                <a href="{% url 'kuai_club:home' %}">
                    <img src="{% static 'kuai_club/images/kuai_club_logo.png' %}" alt="KUAI Club Logo" class="logo-img">
                    <h1>Kabale University AI Club</h1>
                </a>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="{% url 'kuai_club:home' %}">Home</a></li>
                    <li><a href="{% url 'kuai_club:about' %}">About Us</a></li>
                    <li><a href="{% url 'kuai_club:news_list' %}">News</a></li>
                    <li><a href="{% url 'kuai_club:event_list' %}">Events</a></li>
                    <li><a href="{% url 'kuai_club:executive_leaders' %}">Leaders</a></li>
                    <li><a href="{% url 'kuai_club:project_list' %}">Projects</a></li>
                    <li><a href="{% url 'kuai_club:community_list' %}">Communities</a></li>
                    <li><a href="{% url 'kuai_club:resource_list' %}">Resources</a></li>
                    <li><a href="{% url 'kuai_club:partner_list' %}">Partners</a></li>
                    {# Link to your IndabaX app. Make sure your indabax_app has a 'home' URL name #}
                    <li><a href="{% url 'indabax_app:home' %}">IndabaX App</a></li> 
                </ul>
            </nav>
        </div>
    </header>

    <main class="main-content">
        {% block content %}
        {# Content from child templates will be injected here #}
        {% endblock content %}
    </main>

    <footer class="main-footer">
        <div class="container footer-content">
            <p>&copy; {% now "Y" %} Kabale University AI Club. All rights reserved.</p>
            <div class="footer-links">
                {# Add social media links or other footer navigation here #}
                <a href="#" target="_blank">Facebook</a> |
                <a href="#" target="_blank">Twitter</a> |
                <a href="#" target="_blank">LinkedIn</a>
            </div>
            <p>Email: <a href="mailto:info@kuaiclub.ug">info@kuaiclub.ug</a></p>
            <p>Location: Kabale University, Kikungiri Hill, Kabale, Uganda</p>
        </div>
    </footer>

    {# Optional: Global JS files or scripts #}
    {# <script src="{% static 'kuai_club/js/script.js' %}"></script> #}
</body>
</html>




# models.py
from django.db import models
from django.utils.text import slugify
from django.utils.timezone import now

class Event(models.Model):
    title = models.CharField(max_length=150, unique=True)
    slug = models.SlugField(max_length=160, unique=True, blank=True)
    summary = models.TextField(blank=True)
    description = models.TextField(blank=True)
    event_url = models.URLField(max_length=300, blank=True, null=True)
    location = models.CharField(max_length=200, blank=True)
    image = models.ImageField(upload_to='event_images/', blank=True, null=True)
    is_published = models.BooleanField(default=True)
    event_start = models.DateTimeField(null=True, blank=True)
    event_end = models.DateTimeField(null=True, blank=True)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        verbose_name = "Event"
        verbose_name_plural = "Events"
        ordering = ['event_start']

    def __str__(self):
        return self.title

    def save(self, *args, **kwargs):
        if not self.slug:
            self.slug = slugify(self.title)
        if not self.event_start:
            self.event_start = now()
        super().save(*args, **kwargs)

    def is_upcoming(self):
        return self.event_start and self.event_start > now()

    def time_until(self):
        from django.utils.timezone import now
        delta = self.event_start - now()
        if delta.total_seconds() > 0:
            days = delta.days
            hours = delta.seconds // 3600
            minutes = (delta.seconds % 3600) // 60
            return f"{days}d {hours}h {minutes}m remaining"
        return "Started or Passed"

# admin.py
from django.contrib import admin
from .models import Event

@admin.register(Event)
class EventAdmin(admin.ModelAdmin):
    list_display = ('title', 'event_start', 'event_end', 'is_published', 'is_upcoming')
    list_filter = ('is_published', 'event_start')
    search_fields = ('title', 'summary', 'location')
    prepopulated_fields = {"slug": ("title",)}
